### 版面分析任务

#### 问题需求

* 版面分析和分割的区别？
* 版面层次结构（几何，罗辑）
* 总体技术路线：自顶向下，特征属性，自底向上



1. 将版面的各个类型区域识别出来，并作OCR识别；自动分析处理文档的各个区域；对重要的对象（文字，表格，数字公式自动检测和定位（识别放后面））
2. 表格是版面的子部分（还原表格的逻辑--是子任务）



https://blog.csdn.net/demm868/article/details/106010223

数据集收集：

 数据量；对应bbox和色块掩模（实例分割，语义分割）





#### 解决方案

##### 传统方法

* 分割线提取版面

  * 阈值提取线簇；
  * 线簇主轴提取

* 版面分割

  * 版面类型，光照

  * 扭曲校正（预处理，形态学分析等）

  * 区域类型（标题，正文，图像）

  * 惯性大水滴滴水算法，竖直投影法，CFS连通域分析，灰度化（二值化）

    





#### 表格还原任务  --收集数据

https://blog.csdn.net/cxn511/article/details/108265728

整个表格还原集合了表格检测、表格线分割、OCR、字体属性和多目标检测算法；支持导出pdf,excel,json和html格式，其中pdf支持印章和单元格图片还原  [？？？方法未公布]



https://zhuanlan.zhihu.com/p/187112569

https://flashgene.com/archives/45642.html











#### 表格还原任务

业务需求：日常办公场景，表格图片倒入到excel等电子表格；（文档尤其是通过扫描、拍照等方式生成的文档的快速增长）

技术需求：借助OCR软件自动从图片中提取文本信息。表格任务提取文本后还需要恢复原有的表格逻辑

##### 技术参考

业界方案：ABByy fine reader 非开源技术

论文思路：[参考](https://flashgene.com/archives/45642.html)

* OCR检测文本，利用空间框排布，推导出有哪些行、有哪些列、哪些单元格需合并；
  * 极度依赖OCR检测结果和人工设计的规则；对于不同样式的表格，需做针对性开发，推广性差；
* 图像形态学变换、纹理提取、边缘检测等手段，提取表格线，再由表格线推导行、列、合并单元格的信息；
  * 依赖传统图像算法，鲁棒性方面较欠缺，并且对于没有可见线的表格，很难把所有行/列间隙提取出来；
* 神经网络端到端学习，TableBank使用image to text技术，将表格图片转为某种结构化描述语言（比如html定义表格结构的标签）
  * 一旦出现bad case，无法从中间步骤快速干预修复，只能重新调整模型（还不一定能调好），看似省事，实则不适合工程落地
* 新方案-基于深度图像分割
  * 1） 对表格图片应用深度学习进行图像分割，分割的目的是对表格线部分进行标注，分割类别是4类：横向的线，竖向的线，横向的不可见线，竖向的不可见线，类间并不互斥，也就是每个像素可能同时属于多种类别，这是因为线和线之间有交点，交点处的像素是同属多条线的。
  * 对分割图分别做几何分析，即先提取连通区域，再对连通区域拟合折线，再对游离的线段根据距离和倾角进行合并形成框线。由于拍摄角度或者纸张的弯曲，一般原图表格会有一些倾斜，可使用投影变换（perspective transformation）对原图进行校正，使得横框线校至水平，竖框线校至竖直。
  * 对校正后的图调用OCR，识别其中的文本内容，以及每个字符的坐标。
  *  根据第2）步得到的框线，计算出有哪些行，哪些列，其中哪些单元格跨行列合并了。由此得到每个单元格在图中的位置（top_left, top_right, bottom_left, bottom_right）四点坐标
  * 将单元格位置，与字符坐标进行匹配，决定每个字符在哪个单元格中。最后计算每个单元格的字号大小，对齐方式等格式信息。



参考方法：http://gb.oversea.cnki.net/KCMS/detail/detail.aspx?filename=1019047330.nh&dbcode=CMFD&dbname=CMFD2019

比赛信息参考：https://cloud.tencent.com/developer/article/1546182

论文吸毒：https://zhuanlan.zhihu.com/p/187112569



| 数据集         | 特点                                   | 是否收集 |      |
| -------------- | -------------------------------------- | -------- | ---- |
| TableBank      |                                        |          |      |
| **ICDAR 2013** | 150 个表格                             |          |      |
| ICDAR 2019     | 包含 600 个现代文档                    |          |      |
| PubTabNet      | 56.8 万张表格，html 格式的注释，无bbox |          |      |
| SciTSR         | 15000                                  |          |      |



![1616066960369](C:\Users\viruser.v-desktop\AppData\Roaming\Typora\typora-user-images\1616066960369.png)

