#### Rec特性

##### 数据加载

* 加载LMDB格式数据
* 分层收集训练样本
* 图片预处理，标签预处理
* **在线增强数据，增强pipe**

##### 模型结构

* 模型结构分子类构建，统一在参数中初始化
* focal-loss使用

##### 训练pipe

* 学习率规划
* eopch训练
* 验证集最优模型保存
* **训练可视化**
* 模型重载训练
* 参数正则化
* yaml参数化配置

##### 推理pipe

* 复用训练的图片处理流程
* 单张-batch推理

##### 测评pipe

* **保存badcase分析**
* 取特征图分析

* **模型剪枝和重训练**





#### 代码需求

* 应用层模块化代码，不同模型分开，集成
* 向下兼容，配置文件中修改参数和模块



原代码--兼容CTC/Attn模型， 线上推理模型 {训练-测评分析，线上推理}



原识别代码：ppocr格式

ppocr迁移成torch版本



ppocr + torch识别集成







数据处理设计：

原方案：

* 读取标注文件，随机采样序号，对每张图片进行resize，normal， pad预处理，按图片大小分层组成batch

新方案：

* 数据源：怎么组织数据？

* 采样方式：保证不同长度的样本不要相差太大，来之不同数据集需要不同的增强处理；
* 增强方式：

